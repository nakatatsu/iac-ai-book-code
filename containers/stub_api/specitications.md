# スタブAPI コンテナ仕様

## 使用するライブラリ

- Flask
- psycopg2-binary
- logging


## 関数

- **check_db_connectivity()**
   - **入力**:  
     - 特になし
   - **処理**:  
     - postgresqlに接続する。接続文字列に必要なパラメータは全て環境変数から取得する。
     - 接続に成功していたらTrue,失敗していたらFalseを返す
   - **返り値**:
     - bool型


### エンドポイント

- **/**
   - **概要**:  
     - アプリケーション自体の稼働確認用。
   - **入力**:  
     - 特になし
   - **処理**:  
     - 行う処理なし
   - **出力**:  
     - 単純なJSONレスポンス（`{"status": "ok"}`）とHTTPステータス200を返す

- **/db**
   - **目的**:  
     - DBとの疎通確認。実際のDB接続を試み、接続成功/失敗に応じたレスポンスを返す  
   - **入力**:  
     - 特になし
   - **処理**:  
     - check_db_connectivity()を呼び出す
   - **出力**:
     - check_db_connectivity()の結果がTrueならSuccess、FalseならFailを返す

- **/error**
   - **目的**:  
     - エラーログ出力テストを行う
   - **入力**:  
     - 特になし
   - **処理**:  
     - ロガーに"[Error] Whoops, our code threw a tantrum!"と出力する
   - **出力**:
     - 単純なJSONレスポンス（`{"status": "error"}`）とHTTPステータス500を返す


## ロギング

- すべてSTDOUTに出力する
- エラーレベルによる出しわけはせず（スタブなので）、渡されたメッセージをそのまま出力する。

## エラーハンドリング

- 省略する

## メインエントリポイント

- `if __name__ == '__main__':` ブロックで、Flaskアプリを起動する  
- コンテナ内で動作させるため、ホストは`0.0.0.0`を指定する
- ポートは80番で受ける
