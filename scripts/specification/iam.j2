# AWS IAM モジュール仕様書({{identifier}}分) 作成

IAMロールとIAMポリシーを定義するモジュール仕様書({{identifier}}分)を作成してください。

## 前提条件 

### モジュール要件
~~~
{{requirements}}
~~~

### インフラ設計ポリシー
~~~
{{infrastructure_design_policy}}
~~~

### メインのモジュール仕様書
~~~
{{main_specifications}}
~~~

## 制約条件 

- 権限が類似していても、リソース単位で権限を分ける必要があるものはポリシーごと分けてください
- 出力フォーマットを厳守し、設定には具体的なキーと値を記載してください。
- 意味を有さない記述（例: 「適切な権限を付与する」）は避けてください。

## 終了条件 

以下の条件をすべて満たす場合に終了と見なします：

1. **要件の網羅性**: モジュール要件とメインのモジュール仕様書に基づき、必要なIAMロールとポリシーがすべて記載されている。
2. **ポリシー準拠性**: インフラ設計ポリシーに完全に準拠している。
3. **フォーマットの遵守**: 指定されたフォーマットに基づいて記載されている。

## 出力形式 

### テンプレート

以下のフォーマットに基づいてIAMロールおよびポリシー仕様書を記載してください：

```markdown
# {{identifier}} IAMロールおよびポリシー仕様書

## [ポリシー名]

[説明]

- **[対象リソース]**: [許可内容]

## [ロール名]

[説明]

### アタッチするポリシー
-  [ポリシー名] 
```

### 出力例

以下は出力例です：

```markdown
# API IAMロールおよびポリシー仕様書

## API IAM Policy

APIコンテナが必要とする権限を付与します。

- **Amazon S3**: バケット「`${var.environment}-${var.project}-logs`」への読み取り/書き込みアクセスを提供。
- **CloudWatch Logs**: 「`/aws/ecs/${var.environment}-${var.project}-logs`」内のログストリームおよびログイベントを作成および管理するための書き込みアクセスを提供。
- **SSMパラメータストア**: APIのパラメータ値を取得することを許可。アクセスは「`/${var.environment}/${var.project}/*`」プレフィックスを持つキーに限定。

## ECSタスクロール

APIのECSタスクにアタッチされるロールです。

### アタッチするポリシー
- API IAM Policy

## ECSタスク実行ロール

APIのECSタスクを実行するためのロールです。

### アタッチするポリシー
- AWS マネージドポリシーのAmazonECSTaskExecutionRolePolicy
```